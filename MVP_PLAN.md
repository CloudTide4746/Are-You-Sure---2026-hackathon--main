# MindBridge 黑客松 MVP 方案

> 生成时间：2026-02-07
> 基于：`to晚风.md` 交接文档

---

## 一、项目概述

MindBridge 是一个 AI 驱动的项目脑图工具，帮助用户将模糊的想法转化为清晰的项目方案。

### 核心流程
```
输入想法 → AI 澄清 → 生成脑图 → 逐项作答 → 追问/Tips → 融合文档
```

---

## 二、MVP 核心功能（P0 - 必须）

| 序号 | 功能模块 | 当前状态 | 说明 |
|------|----------|----------|------|
| 1 | 立项对话 | 已实现 | 输入项目想法，AI 澄清项目本质 |
| 2 | 脑图生成 | 已实现 | 生成 2-3 个初始问题节点 |
| 3 | 节点作答 | 已实现 | 点击红色节点回答，完成后变绿 |
| 4 | 进度追踪 | 已实现 | 显示完成百分比 |
| 5 | 文档融合 | 已实现 | 全部完成后生成最终方案文档 |

---

## 三、必须修复的问题（P0）

根据 `to晚风.md` 第 35-49 行的已知问题：

### 3.1 节点交互不稳定
- **问题**：浮层（`#question-float`、`#node-panel`）可能挡住节点点击
- **位置**：`frontend/main.js`
- **影响**：用户无法正常选择节点

### 3.2 拖拽连线不同步
- **问题**：拖拽节点时连线未实时更新
- **位置**：`frontend/main.js` `updateConnectors()` 函数
- **影响**：脑图视觉体验差，连线错位

### 3.3 Tips 功能不稳定
- **问题**：Tips 候选生成和选择可能失败
- **位置**：`frontend/main.js` Tips 相关函数
- **影响**：用户无法获取 AI 提示建议

---

## 四、可简化/暂缓的功能（P1 - 可选）

| 功能 | 建议操作 | 原因 |
|------|----------|------|
| Tips 多选候选 | 简化为单条直接应用 | 减少复杂度，提升稳定性 |
| 自动 AI 回答（by_ai） | 暂缓 | 核心是人工作答 |
| 文档上传解析 | 保留但非核心展示 | 演示时可以直接输入文本 |
| 右键菜单 | 改为直接按钮 | 更直观，降低操作门槛 |

---

## 五、建议的演示流程

```
步骤 1：用户输入
   "我要做一个 AI 驱动的学习助手"

步骤 2：AI 澄清对话
   AI："核心痛点是什么？是课程推荐还是答疑辅导？"

步骤 3：进入脑图
   自动生成 3 个红色问题节点（目标用户、核心功能、技术选型）

步骤 4：逐个作答
   用户点击红色节点 → 输入回答 → 节点变绿 → 进度条增长

步骤 5：追问（可选）
   在已回答节点上点击"追问" → 生成新的黄色子节点 → 继续作答

步骤 6：融合文档
   进度 100% → 点击"融合" → 生成完整项目方案文档
```

---

## 六、技术栈确认

| 层级 | 技术选型 | 说明 |
|------|----------|------|
| 后端 | FastAPI + SQLite | 无需额外配置 |
| 前端 | 原生 JS + Tailwind | 单页应用，无构建 |
| AI | OpenAI 兼容接口 | 无 API Key 时使用 stub |
| 数据库 | SQLite | 单文件存储 |

---

## 七、备选实施工作（可按需选择）

### 7.1 修复节点交互和拖拽连线 bug
- **难度**：中
- **耗时**：预计 1-2 小时
- **涉及文件**：
  - `frontend/main.js` - 检查 `pointer-events` 设置
  - `index.html` - 检查 z-index 层级
- **关键点**：
  - 确保 `question-float` 外层 `pointer-events: none`
  - 确保 `updateConnectors()` 在拖拽时被调用
  - 检查 `nodePositions` 状态同步

### 7.2 简化 Tips 功能，提升稳定性
- **难度**：中
- **耗时**：预计 1-2 小时
- **涉及文件**：
  - `frontend/main.js` - Tips 相关函数
  - `backend/ai_client.py` - `make_tips_candidates` 方法
- **关键点**：
  - 减少候选数量（2 条足够）
  - 添加 fallback 逻辑
  - 优化错误处理

### 7.3 增强 UI/UX 演示效果
- **难度**：低
- **耗时**：预计 30 分钟 - 1 小时
- **涉及文件**：
  - `index.html` - Tailwind 类名调整
  - `frontend/main.js` - 动画逻辑
- **关键点**：
  - 添加节点切换动画
  - 优化进度条颜色渐变
  - 添加完成时的庆祝动画

### 7.4 添加 Agent Skills 预置模板
- **难度**：高
- **耗时**：预计 3-4 小时
- **涉及文件**：
  - `backend/models.py` - 新增 Skill 模型
  - `backend/main.py` - 新增 API 路由
  - `backend/ai_client.py` - 注入 Skill 上下文
  - `frontend/main.js` - 添加 Skill 选择器
- **关键点**：
  - 预置 2-3 个场景模板（如：SaaS 产品、移动应用）
  - 在 LLM 调用时注入模板内容
  - 前端添加下拉选择器

### 7.5 优化导出文档格式
- **难度**：低
- **耗时**：预计 1 小时
- **涉及文件**：
  - `backend/ai_client.py` - `merge_project_doc` 方法
- **关键点**：
  - 生成 Markdown 格式
  - 添加目录结构
  - 美化排版

---

## 八、时间参考

| 任务类型 | 预计时间 |
|----------|----------|
| 跑通现有项目 | 30 分钟 |
| 修复 P0 bug | 2-3 小时 |
| 简化 Tips 功能 | 1-2 小时 |
| UI 优化 | 1 小时 |
| 准备演示 Demo | 1 小时 |

**总计**：约 5-7 小时

---

## 九、快速启动

```bash
# 1. 安装依赖
pip install -r requirements.txt

# 2. 启动服务
uvicorn backend.main:app --reload

# 3. 打开浏览器
http://localhost:8000
```

---

## 十、文件结构速查

```
backend/
├── main.py          # API 路由
├── services.py      # 业务逻辑
├── ai_client.py     # AI 调用
├── models.py        # 数据模型
└── db.py            # 数据库

frontend/
└── main.js          # 前端入口

index.html           # 单页应用
```

---

*本方案基于 `to晚风.md` 交接文档整理，如有疑问请参考原文档。*
